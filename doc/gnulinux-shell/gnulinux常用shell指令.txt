# linux指令教程          
文字教程  https://www.runoob.com/linux/linux-tutorial.html    
视频教程推荐   https://www.bilibili.com/video/BV1Kf421q7S3/        

- root 和修改密码   
root  ：su   (慎用su,一般用sudo,sudo权限不足才用su))       

修改用户名        
sudo passwd 加用户名   修改密码             
修改用户名 
sudo usermod -l 新用户 旧用户       
注意： 你需要从要改名的帐号中登出并杀掉该用户的所有进程，要杀掉该用户的所有进程可以执行下面命令 sudo pkill -u 旧用户名             
sudo pkill -9 -u 旧用户名            
2、修改家目录 sudo usermod -d /home/新用户名 -m 新用户名              
退出登陆    logout        
登陆         login  用户名     
3. 修改所属组名         
groupmod -n 新组名 旧组名       
                 

***     
- 添加用户      
1. 添加新用户 user。 然后把他加进群组 wheel 并更改他的密码。         
  pacman -S sudo nano    
添加用户    
useradd -m 新用户名 
将新用户添加到某用户组         
  useradd -aG 新用户名 用户组      
修改密码     
passwd 新用户名      
例子： 
  useradd -m -g users -G wheel,audio,video,storage -s /bin/bash user      
  passwd user             

2. 新用户 user 给 sudo权限 改sudoers文件               
编辑 /etc/sudoers          
sudo nano /etc/sudoers        
添加权限 ，添加行             
 user ALL=(ALL) ALL     
- 登陆用户     
login 用户名            
退出用户   logout             
重启    reboot                
关机  poweroff           


- 进入目录    
cd 目录   
cd  （例子  根目录 /       cd ～/Desktop ～代表用户目录）               
- 查看前在哪个目录
 pwd    
 列出文件 ls（不含隐藏文件）   
ls            
列出所有文件包含隐藏文件   ls -a       
列表形式展开  ls -l（a）  
以kb单位显示  ls -lha              
查看指令说明 man ...（比如ls ）     
返回上一级    
cd .. 返回上一级目录   
cd ./.. 返回上两级目录   
cd或cd ~ 返回home目录     
cd / 返回根目录 cd - 返回刚才的目录   
cd - 目录名 返回指定目录    

- 新建文件        
touch 文件名            
新建文件夹      
mkdir 文件夹名     
mkdir -p 一级目录/二级目录      
打开（比如用nano打开）   
nano  +文件名   
cat  +查看内容   
less + 查看内容   

- 移动文件和目录       
mv 旧文件 空格 新目录      
man mv（查看mv指令说明）    
- 重命名文件和目录                 
mv 旧文件 空格 新文件    
mv - 加tap建       
或者rename和cp指令       

- 复制文件和目录               
cp 旧文件 新路径        


- 删除 （man rm 查看指令说明）     
rm +文件     
rm -r 文件夹  (-r是递归文件指令)  

- tab补全快捷键 （联想和补全剩下输入内容预选等）    
按两次tab  加载预选补全项目      
按一次tab  补全     
- ctrl+x  快捷键   退出当前指令操作          
ctrl a    定位到这行命令头部               
ctrl e     定位到命令尾部          
ctrl r   搜索输入过的命令 （左右按键切换）      
输入history    列出用过的所有指令  ！加数字序号执行改序号的指令            
history -c     清除内存中历史指令记录     
sudo rm ～/.bash_history     删除硬盘中保存的历史指令记录      

- 输入输出重定向      
1. >>     
echo 123 >> 23.txt     
 把123 添加到23.txt文件末尾      
2. >       
echo 123 > 23.txt          
删除 23.txt文件夹所有内容并写入 123     

- vi 编辑器使用          
插入快捷键 o或者a或者i            
退出此模式    按“Esc“           
保存退出 “：wq “    
退出 “：q“     
强制退出不保存 “：q！“ 
      
****

- 修改权限chmod指令        
ugo体系    
user（用户）    group（用户组）    other（其他用户和用户组）      
权限体系   
r  4    读read   
w  2    写write    
x  1    执行executable     
-（0）   没有这个权限（取消权限）
+添加权限    
示例： ls -l           
结果  -rw-r--r-- root 1304 3月 21：10 1.txt    
低一个-rw 表示此用户下1.txt是读写权限      
第二个-r表示用户组下1.txt是只读权限    
低三个-r 表示其他用户组下1.txt是只读权限 
1. 修改权限，以文件1.txt为例    
添加r权限和w权限    
chmod +rw 1.txt    
取消读权限      
chmod -r 1.txt   
添加所有权限    
shnod 700 1.txt         
添加删除某用户下的读权限       
chmod u+r 1.txt    
chmod o-r 1.txt       
u表示user，o表示others     
修改文件夹下所有文件用 -R 指令     
比如修改文件夹1    
chmod -R +rw 1 

- 数字权限体系    
         0    --    
         1       x        
         2       w     
         3       wx      
         4       r     
         5       rx     
         6       rw     
         7       xwr     
例子： sudo chmod 740 1.txt    
表示给当前用户7（读写执行权限），给用户组r只读权限，给其他用户组无任何权限      
对于目录来说，r等于允许查看目录内有哪些文件，w表示运行目录内删除创建等，x表示可以cd切换到该目录             
一般文件给644权限（运行自己读写运行组和其他读，除root外都不能执行）或更安全的600（只运行自己读写，其他都不能读写）                 
一般目录给755权限或者更安全的700                                 

- 改变文件所属用户而所属组      
root 用户下使用chown （change owner） 指令    
改变文件所属       
chown  所属用户   文件名     
改变文件所属用户和用户组       
chown  所属用户：所属组  文件名   
- 查看用户uid和gid
1. id 用户名       
2. cat /etc/passwd   （查看全部）        
chown指令可以用uid和gid的数值替换用户名和组名    
- ls -l（h）  指令查看文件的文件属性，加h让文件单位显示为kb   
-rw-rw-rw-. 1 lisi lisi  0   3月  20    16：00  222.txt       
-表示文件，d目录，l软链接 ，b块设备     
.表示开启selinux状态下创建  (无.表示没有开启，最好不开启，开启后操作麻烦)    
1表示硬链接    
lisi lisi 是所属用户和用户组  
0表示大小
3月20  16：00   最后修改时间    
- 查看文件时间     
stat 文件名        
显示访问时间，修改时间（内容修改），变更时间（文件属性修改），创建时间      
- shell  所有指令都叫shell指令          



               



*** 
- 新建程序开启启动         
sudo systemctl enable xxx    
启动程序         
systemctl start xxx.service    
关闭程序       
systemctl stop xxx   
关闭开机启动     
systemctl disable xxxx        


- 更换终端     
pacman -S alacritty    
切换快捷键    
CTRL + ALT +F1~F6      








# arhlinux 的 pacman指令      

https://ipcmen.com/pacman    
https://wiki.archlinux.org/title/Pacman    

-R remove    
-D database   
-Q query查询    
-S sync同步   
-U  本地安装 联机安装第三方     

安装 sudo pacman -S ...   
   fish    
   nano 编辑器   

sudo pacman     
- s指令    
安装                  -S      
更新软件源 sudo pacman -Sy（Syy）    
更新所有软件           -Su    
源加软件              -Sy（y）u    
查找软件              -Ss 加名 可 模糊搜索    
删除下载包             -Sc    
删除下载包及缓存        -Scc   
pacman -Sw 包名:只下载包,不安装。      
pacman -Sc:Pacman 下载的包文件位于 /var/cache/pacman/pkg/ 目录。该命令将清理未安装的包文件。    
pacman -Scc:清理所有的缓存文件。   

- R  指令     
删除软件              -R ...   
相关依赖一起删         -Rs ...    
相关依赖加配置         -Rsn    

- U   指令          
-U 安装本地包,其扩展名为 pkg.tar.gz     


- 其他    
全局配置文件  -Rns     
查询全安装软件-Q\Qe/Qeq 全部/自己安装/      
  不显示版本号              -Qeq     
多少个软件      -Q  | wc     
查询安装软件   -Qes ...（可模糊搜索）    
查询不需要依赖 （孤儿） -Qdt （q）    
删除 不需要依赖    
           -R $(pacman -Qdtw）    
           -Rs $(pacman -Qtdq)    



pacman配置文件地址     
  sudo vim/etc/pacman.conf     
cheak space     
  
- pacman软件源     
sudo pacman-mirrors -i -c China -m rank     
选择最小的    

添加arhlinux中国镜像源     
sudo nano /etc/pacman.d/mirrorlist     
头部添加        
Server = http://mirrors.aliyun.com/archlinux/$repo/os/$arch    
添加archlinux cn源     

sudo nano /etc/pacman.conf    
末尾添加    
[archlinuxcn]    
Server = http://mirrors.aliyun.com/archlinux/$repo/os/$arch     

添加完成后在键盘上Ctrl+X，再点y ，保存退出   
本地信任 farseerfc 的 GPG key：   
   sudo pacman-key --lsign-key "farseerfc@archlinux.org"    
导入archlinuxcn-keyring密钥链：   
  sudo pacman -S archlinuxcn-keyring    
在上述操作都完成后，使用命令如下命令完整地更新系统s   
    sudo pacman -Syyu         

安装yay          aur用户仓库包管理器    
sudo pacman -S yay     
yay安装软件 （包含pacman）    
yay -S 软件名    


安装discover    
sudu pacman discover   

安装wine    
sudo pacman -Sy wine   

sudo pacman -S plasma-wayland-session     
切换     
yay -S waydroid     
启动    

- pamac       
使用aur 商店自动安装   
使用带有 GUI 的 Pamac     
yay pacmac    

打开 Pamac ——在启动器中的名字叫做“添加/删除软件”——然后转到首选项页面。您需要输入密码以访问。选择第三方选项卡，然后打开 AUR 支持。请确保你有必要的程序从源代码编译应用程序     
pamac install base-devel git     
 pamac search -a （软件名）      查找    
pamac build     

pamac search -a     
pamac build google-chrome    

qidong     

##  waydroid arm转译      
git clone https://github.com/casualsnek/waydroid_script    
cd waydroid_script    
python3 -m venv venv   
venv/bin/pip install -r requirements.txt    
sudo venv/bin/python3 main.py    

##  swap      

#永久设置    
 
#永久修改     
echo "vm.swappiness=10" >> /etc/sysctl.conf    
 
#生效   
sysctl -p      



